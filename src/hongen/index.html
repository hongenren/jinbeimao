<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>名字</title>
  <style>
      #box{
        width: 360px;
        height: 360px;
        background: #fff;

      }
      div{
        width: 100px;
        height: 100px;
        background: red;
        margin: 10px;
        display: inline-block;
      }
  </style>
</head>
<body>
    <div id="box">
        <input type="text" v-model="message">
        {{message}}
        {{text}}
    </div>
    <div>
      你好呀
    </div>
    <div>
       发不发呢只
    </div>
    <div>
      tuisong推送
    </div>
</body>
<script>
  class Vue {
      constructor(options) {
        this.$options = options
        this._data = options.data
        observer(options.data, this._update)
        this._update()
      }
      _update(){
        this.$options.render()
      }
    }


    function observer(value, cb){
      Object.keys(value).forEach((key) => defineReactive(value, key, value[key] , cb))
    }

    function defineReactive(obj, key, val, cb) {
      Object.defineProperty(obj, key, {
        enumerable: true,
        configurable: true,
        get: ()=>{},
        set:newVal=> {
          cb()
        }
      })
    }

    var demo = new Vue({
      el: '#demo',
      data: {
        text: 123,
      },
      render(){
        console.log("我要render了")
      }
    })

    //  setTimeout(function(){
    //    demo._data.text = 444
    //  }, 3000)
</script>
</html>
